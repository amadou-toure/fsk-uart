LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;
USE IEEE.std_logic_arith.ALL;
USE IEEE.std_logic_unsigned.ALL;

ENTITY Sinus IS
    PORT (
        CLK : IN STD_LOGIC;
        X1 : IN STD_LOGIC_VECTOR(4 DOWNTO 0);
        NA : OUT STD_LOGIC_VECTOR(7 DOWNTO 0)

    );
    -- for the frequency, use this formula:
    -- F=1/[(128/PAS)*tclk]
    -- where tclk=1/f (for 12Mhz clk, tclk=83,3ns)
    -- PAS=f*tclk*128

END Sinus;
ARCHITECTURE Sinus_arch OF Sinus IS
    SIGNAL PAS : INTEGER := 1;
    SIGNAL deg : INTEGER RANGE 0 TO 127 := 0;
    SIGNAL compteur : INTEGER := 0;
    SIGNAL N : INTEGER := 6000000;
    SIGNAL freq1 : REAL := 0.21;
    SIGNAL freq2 : REAL := 0.42;
    SIGNAL state : STD_LOGIC := '0';
BEGIN
    -- PROCESS (CLK, X1)
    PROCESS (CLK, PAS)
    BEGIN

        -- IF rising_edge(clk) THEN
        --     IF compteur < N THEN
        --         compteur <= compteur + 1;
        --     ELSE

        --         compteur <= 0;
        --         state <= NOT state;
        --         IF (state = '0') THEN

        --             PAS <= freq1;

        --         ELSE
        --             PAS <= freq2;

        --         END IF;
        --     END IF;
        -- END IF;
        IF (CLK'event AND CLK = '1') THEN
            IF (deg > 127) THEN
                deg <= deg - 127;
            ELSE
                -- deg <= deg + CONV_INTEGER(X1);
                deg <= deg + INTEGER(PAS);
            END IF;
        END IF;
    END PROCESS;
    WITH deg SELECT
        NA <= CONV_STD_LOGIC_VECTOR(128, 8) WHEN 0,
        CONV_STD_LOGIC_VECTOR(134, 8) WHEN 1,
        CONV_STD_LOGIC_VECTOR(140, 8) WHEN 2,
        CONV_STD_LOGIC_VECTOR(147, 8) WHEN 3,
        CONV_STD_LOGIC_VECTOR(153, 8) WHEN 4,
        CONV_STD_LOGIC_VECTOR(159, 8) WHEN 5,
        CONV_STD_LOGIC_VECTOR(165, 8) WHEN 6,
        CONV_STD_LOGIC_VECTOR(171, 8) WHEN 7,
        CONV_STD_LOGIC_VECTOR(177, 8) WHEN 8,
        CONV_STD_LOGIC_VECTOR(182, 8) WHEN 9,
        CONV_STD_LOGIC_VECTOR(188, 8) WHEN 10,
        CONV_STD_LOGIC_VECTOR(193, 8) WHEN 11,
        CONV_STD_LOGIC_VECTOR(199, 8) WHEN 12,
        CONV_STD_LOGIC_VECTOR(204, 8) WHEN 13,
        CONV_STD_LOGIC_VECTOR(209, 8) WHEN 14,
        CONV_STD_LOGIC_VECTOR(213, 8) WHEN 15,
        CONV_STD_LOGIC_VECTOR(218, 8) WHEN 16,
        CONV_STD_LOGIC_VECTOR(222, 8) WHEN 17,
        CONV_STD_LOGIC_VECTOR(226, 8) WHEN 18,
        CONV_STD_LOGIC_VECTOR(230, 8) WHEN 19,
        CONV_STD_LOGIC_VECTOR(234, 8) WHEN 20,
        CONV_STD_LOGIC_VECTOR(237, 8) WHEN 21,
        CONV_STD_LOGIC_VECTOR(240, 8) WHEN 22,
        CONV_STD_LOGIC_VECTOR(243, 8) WHEN 23,
        CONV_STD_LOGIC_VECTOR(245, 8) WHEN 24,
        CONV_STD_LOGIC_VECTOR(248, 8) WHEN 25,
        CONV_STD_LOGIC_VECTOR(250, 8) WHEN 26,
        CONV_STD_LOGIC_VECTOR(251, 8) WHEN 27,
        CONV_STD_LOGIC_VECTOR(253, 8) WHEN 28,
        CONV_STD_LOGIC_VECTOR(254, 8) WHEN 29,
        CONV_STD_LOGIC_VECTOR(254, 8) WHEN 30,
        CONV_STD_LOGIC_VECTOR(255, 8) WHEN 31,
        CONV_STD_LOGIC_VECTOR(255, 8) WHEN 32,
        CONV_STD_LOGIC_VECTOR(255, 8) WHEN 33,
        CONV_STD_LOGIC_VECTOR(254, 8) WHEN 34,
        CONV_STD_LOGIC_VECTOR(254, 8) WHEN 35,
        CONV_STD_LOGIC_VECTOR(253, 8) WHEN 36,
        CONV_STD_LOGIC_VECTOR(251, 8) WHEN 37,
        CONV_STD_LOGIC_VECTOR(250, 8) WHEN 38,
        CONV_STD_LOGIC_VECTOR(248, 8) WHEN 39,
        CONV_STD_LOGIC_VECTOR(245, 8) WHEN 40,
        CONV_STD_LOGIC_VECTOR(243, 8) WHEN 41,
        CONV_STD_LOGIC_VECTOR(240, 8) WHEN 42,
        CONV_STD_LOGIC_VECTOR(237, 8) WHEN 43,
        CONV_STD_LOGIC_VECTOR(234, 8) WHEN 44,
        CONV_STD_LOGIC_VECTOR(230, 8) WHEN 45,
        CONV_STD_LOGIC_VECTOR(226, 8) WHEN 46,
        CONV_STD_LOGIC_VECTOR(222, 8) WHEN 47,
        CONV_STD_LOGIC_VECTOR(218, 8) WHEN 48,
        CONV_STD_LOGIC_VECTOR(213, 8) WHEN 49,
        CONV_STD_LOGIC_VECTOR(209, 8) WHEN 50,
        CONV_STD_LOGIC_VECTOR(204, 8) WHEN 51,
        CONV_STD_LOGIC_VECTOR(199, 8) WHEN 52,
        CONV_STD_LOGIC_VECTOR(193, 8) WHEN 53,
        CONV_STD_LOGIC_VECTOR(188, 8) WHEN 54,
        CONV_STD_LOGIC_VECTOR(182, 8) WHEN 55,
        CONV_STD_LOGIC_VECTOR(177, 8) WHEN 56,
        CONV_STD_LOGIC_VECTOR(171, 8) WHEN 57,
        CONV_STD_LOGIC_VECTOR(165, 8) WHEN 58,
        CONV_STD_LOGIC_VECTOR(159, 8) WHEN 59,
        CONV_STD_LOGIC_VECTOR(153, 8) WHEN 60,
        CONV_STD_LOGIC_VECTOR(147, 8) WHEN 61,
        CONV_STD_LOGIC_VECTOR(140, 8) WHEN 62,
        CONV_STD_LOGIC_VECTOR(134, 8) WHEN 63,
        CONV_STD_LOGIC_VECTOR(128, 8) WHEN 64,
        CONV_STD_LOGIC_VECTOR(122, 8) WHEN 65,
        CONV_STD_LOGIC_VECTOR(116, 8) WHEN 66,
        CONV_STD_LOGIC_VECTOR(109, 8) WHEN 67,
        CONV_STD_LOGIC_VECTOR(103, 8) WHEN 68,
        CONV_STD_LOGIC_VECTOR(97, 8) WHEN 69,
        CONV_STD_LOGIC_VECTOR(91, 8) WHEN 70,
        CONV_STD_LOGIC_VECTOR(85, 8) WHEN 71,
        CONV_STD_LOGIC_VECTOR(79, 8) WHEN 72,
        CONV_STD_LOGIC_VECTOR(74, 8) WHEN 73,
        CONV_STD_LOGIC_VECTOR(68, 8) WHEN 74,
        CONV_STD_LOGIC_VECTOR(63, 8) WHEN 75,
        CONV_STD_LOGIC_VECTOR(57, 8) WHEN 76,
        CONV_STD_LOGIC_VECTOR(52, 8) WHEN 77,
        CONV_STD_LOGIC_VECTOR(47, 8) WHEN 78,
        CONV_STD_LOGIC_VECTOR(43, 8) WHEN 79,
        CONV_STD_LOGIC_VECTOR(38, 8) WHEN 80,
        CONV_STD_LOGIC_VECTOR(34, 8) WHEN 81,
        CONV_STD_LOGIC_VECTOR(30, 8) WHEN 82,
        CONV_STD_LOGIC_VECTOR(26, 8) WHEN 83,
        CONV_STD_LOGIC_VECTOR(22, 8) WHEN 84,
        CONV_STD_LOGIC_VECTOR(19, 8) WHEN 85,
        CONV_STD_LOGIC_VECTOR(16, 8) WHEN 86,
        CONV_STD_LOGIC_VECTOR(13, 8) WHEN 87,
        CONV_STD_LOGIC_VECTOR(11, 8) WHEN 88,
        CONV_STD_LOGIC_VECTOR(8, 8) WHEN 89,
        CONV_STD_LOGIC_VECTOR(6, 8) WHEN 90,
        CONV_STD_LOGIC_VECTOR(5, 8) WHEN 91,
        CONV_STD_LOGIC_VECTOR(3, 8) WHEN 92,
        CONV_STD_LOGIC_VECTOR(2, 8) WHEN 93,
        CONV_STD_LOGIC_VECTOR(2, 8) WHEN 94,
        CONV_STD_LOGIC_VECTOR(1, 8) WHEN 95,
        CONV_STD_LOGIC_VECTOR(1, 8) WHEN 96,
        CONV_STD_LOGIC_VECTOR(1, 8) WHEN 97,
        CONV_STD_LOGIC_VECTOR(2, 8) WHEN 98,
        CONV_STD_LOGIC_VECTOR(2, 8) WHEN 99,
        CONV_STD_LOGIC_VECTOR(3, 8) WHEN 100,
        CONV_STD_LOGIC_VECTOR(5, 8) WHEN 101,
        CONV_STD_LOGIC_VECTOR(6, 8) WHEN 102,
        CONV_STD_LOGIC_VECTOR(8, 8) WHEN 103,
        CONV_STD_LOGIC_VECTOR(11, 8) WHEN 104,
        CONV_STD_LOGIC_VECTOR(13, 8) WHEN 105,
        CONV_STD_LOGIC_VECTOR(16, 8) WHEN 106,
        CONV_STD_LOGIC_VECTOR(19, 8) WHEN 107,
        CONV_STD_LOGIC_VECTOR(22, 8) WHEN 108,
        CONV_STD_LOGIC_VECTOR(26, 8) WHEN 109,
        CONV_STD_LOGIC_VECTOR(30, 8) WHEN 110,
        CONV_STD_LOGIC_VECTOR(34, 8) WHEN 111,
        CONV_STD_LOGIC_VECTOR(38, 8) WHEN 112,
        CONV_STD_LOGIC_VECTOR(43, 8) WHEN 113,
        CONV_STD_LOGIC_VECTOR(47, 8) WHEN 114,
        CONV_STD_LOGIC_VECTOR(52, 8) WHEN 115,
        CONV_STD_LOGIC_VECTOR(57, 8) WHEN 116,
        CONV_STD_LOGIC_VECTOR(63, 8) WHEN 117,
        CONV_STD_LOGIC_VECTOR(68, 8) WHEN 118,
        CONV_STD_LOGIC_VECTOR(74, 8) WHEN 119,
        CONV_STD_LOGIC_VECTOR(79, 8) WHEN 120,
        CONV_STD_LOGIC_VECTOR(85, 8) WHEN 121,
        CONV_STD_LOGIC_VECTOR(91, 8) WHEN 122,
        CONV_STD_LOGIC_VECTOR(97, 8) WHEN 123,
        CONV_STD_LOGIC_VECTOR(103, 8) WHEN 124,
        CONV_STD_LOGIC_VECTOR(109, 8) WHEN 125,
        CONV_STD_LOGIC_VECTOR(116, 8) WHEN 126,
        CONV_STD_LOGIC_VECTOR(122, 8) WHEN 127,
        CONV_STD_LOGIC_VECTOR(128, 8) WHEN 128,
        CONV_STD_LOGIC_VECTOR(128, 8) WHEN OTHERS;

END Sinus_arch;